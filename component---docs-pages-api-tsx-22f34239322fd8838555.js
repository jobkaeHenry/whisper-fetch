"use strict";(self.webpackChunk_jobkaehenry_whisper_fetch=self.webpackChunk_jobkaehenry_whisper_fetch||[]).push([[700],{759:function(e,t,a){a.d(t,{A:function(){return c}});var n=a(758),r=a(4142);var l=e=>{let{items:t}=e;const{0:a,1:r}=(0,n.useState)("");(0,n.useEffect)(()=>{const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&r(e.target.id)})},{rootMargin:"-80px 0px -80% 0px"});return t.forEach(t=>{const a=document.getElementById(t.id);a&&e.observe(a)}),()=>{e.disconnect()}},[t]);return n.createElement("nav",{className:"table-of-contents"},n.createElement("h4",{className:"toc-title"},"목차"),n.createElement("ul",{className:"toc-list"},t.map(e=>n.createElement("li",{key:e.id,className:"toc-item toc-level-"+e.level+" "+(a===e.id?"active":"")},n.createElement("a",{href:"#"+e.id,onClick:t=>((e,t)=>{e.preventDefault();const a=document.getElementById(t);if(a){const e=a.offsetTop-100;window.scrollTo({top:e,behavior:"smooth"}),window.history.pushState(null,"","#"+t)}})(t,e.id),className:"toc-link"},e.text)))))};var c=e=>{let{children:t}=e;const{0:a,1:c}=(0,n.useState)([]),{0:s,1:m}=(0,n.useState)(!1);(0,n.useEffect)(()=>{const e=document.querySelectorAll("h2, h3"),t=[];e.forEach(e=>{const a=e.id,n=e.textContent||"",r=parseInt(e.tagName.substring(1));a&&n&&t.push({id:a,text:n,level:r})}),c(t)},[t]);const i=()=>{m(!s)};return n.createElement(r.A,null,n.createElement("div",{className:"doc-layout"},n.createElement("button",{className:"sidebar-toggle",onClick:i,"aria-label":"Toggle sidebar"},s?"✕":"☰"),n.createElement("aside",{className:"doc-sidebar "+(s?"open":"")},n.createElement("div",{className:"doc-sidebar-content"},a.length>0&&n.createElement(l,{items:a}))),s&&n.createElement("div",{className:"sidebar-overlay",onClick:i,"aria-hidden":"true"}),n.createElement("div",{className:"doc-content"},t)))}},5872:function(e,t,a){a.r(t),a.d(t,{Head:function(){return c}});var n=a(758),r=a(759),l=a(6681);t.default=()=>n.createElement(r.A,null,n.createElement("div",{className:"section"},n.createElement("h1",{id:"api"},"API 레퍼런스"),n.createElement("p",null,"Whisper Fetch의 전체 API 문서입니다.")),n.createElement("div",{className:"section"},n.createElement("h2",{id:"background-prefetcher"},"BackgroundPrefetcher"),n.createElement("p",null,"대용량 파일을 백그라운드에서 프리페치하는 메인 클래스입니다."),n.createElement("h3",{id:"constructor"},"생성자"),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"new-background-prefetcher"},"new BackgroundPrefetcher(options: PrefetchOptions)"),n.createElement("p",null,"새로운 BackgroundPrefetcher 인스턴스를 생성합니다."),n.createElement("div",{className:"param-list"},n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"url"),n.createElement("span",{className:"param-type"},": string (필수)"),n.createElement("p",null,"다운로드할 파일의 URL")),n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"allowOnCellular"),n.createElement("span",{className:"param-type"},"?: boolean"),n.createElement("p",null,"셀룰러 네트워크에서 다운로드 허용 여부 (기본값: false)")),n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"respectSaveData"),n.createElement("span",{className:"param-type"},"?: boolean"),n.createElement("p",null,"사용자의 데이터 절약 모드 존중 여부 (기본값: true)")),n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"minDownlinkMbps"),n.createElement("span",{className:"param-type"},"?: number"),n.createElement("p",null,"최소 네트워크 속도 (Mbps) (기본값: 2)")),n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"chunkSize"),n.createElement("span",{className:"param-type"},"?: number"),n.createElement("p",null,"청크 크기 (바이트). 생략 시 네트워크 상태에 따라 512KB~4MB로 자동 조정")),n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"integritySha256"),n.createElement("span",{className:"param-type"},"?: string"),n.createElement("p",null,"완료 시 검증할 SHA-256 해시")),n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"store"),n.createElement("span",{className:"param-type"},"?: 'opfs' | 'idb'"),n.createElement("p",null,"저장소 타입 (기본값: 'opfs')")),n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"onProgress"),n.createElement("span",{className:"param-type"},"?: (downloaded: number, total?: number) => void"),n.createElement("p",null,"진행률 콜백 함수")),n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"onStatus"),n.createElement("span",{className:"param-type"},"?: (status: Status, error?: any) => void"),n.createElement("p",null,"상태 변경 콜백 함수")))),n.createElement("h3",{id:"methods"},"메서드"),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"start"},"start(): Promise<void>"),n.createElement("p",null,"백그라운드 프리페치를 시작합니다. 유휴 상태를 자동으로 감지하여 다운로드합니다."),n.createElement(l.A,{code:"const prefetcher = new BackgroundPrefetcher({ url: '...' });\nawait prefetcher.start();",language:"typescript"})),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"pause"},"pause(): void"),n.createElement("p",null,"즉시 다운로드를 일시정지합니다."),n.createElement(l.A,{code:"prefetcher.pause();",language:"typescript"})),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"resume"},"resume(): Promise<void>"),n.createElement("p",null,"유휴 상태를 확인하며 다운로드를 재개합니다."),n.createElement(l.A,{code:"await prefetcher.resume();",language:"typescript"})),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"stop"},"stop(): void"),n.createElement("p",null,"다운로드를 중지하고 리소스를 정리합니다."),n.createElement(l.A,{code:"prefetcher.stop();",language:"typescript"})),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"get-object-url"},"getObjectURL(): Promise<string | null>"),n.createElement("p",null,"다운로드가 완료된 경우 조립된 Blob의 Object URL을 반환합니다."),n.createElement(l.A,{code:"const url = await prefetcher.getObjectURL();\nif (url) {\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = 'file.bin';\n  link.click();\n}",language:"typescript"}))),n.createElement("div",{className:"section"},n.createElement("h2",{id:"use-prefetcher"},"React Hook: usePrefetcher"),n.createElement("p",null,"React 애플리케이션에서 쉽게 사용할 수 있는 Hook입니다."),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"use-prefetcher-hook"},"usePrefetcher(options: PrefetchOptions)"),n.createElement("p",null,"BackgroundPrefetcher를 React 컴포넌트에서 사용하기 위한 Hook입니다."),n.createElement("div",{className:"param-list"},n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"options"),n.createElement("span",{className:"param-type"},": PrefetchOptions"),n.createElement("p",null,"BackgroundPrefetcher 생성자와 동일한 옵션 (onProgress, onStatus 제외)"))),n.createElement("h4",{id:"return-value"},"반환값"),n.createElement("div",{className:"param-list"},n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"status"),n.createElement("span",{className:"param-type"},": Status"),n.createElement("p",null,"현재 다운로드 상태 ('idle' | 'started' | 'paused' | 'resumed' | 'completed' | 'stopped' | 'error')")),n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"progress"),n.createElement("span",{className:"param-type"},": number"),n.createElement("p",null,"다운로드 진행률 (0-100)")),n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"start"),n.createElement("span",{className:"param-type"},": () => Promise<void>"),n.createElement("p",null,"다운로드를 시작하는 함수")),n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"pause"),n.createElement("span",{className:"param-type"},": () => void"),n.createElement("p",null,"다운로드를 일시정지하는 함수")),n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"resume"),n.createElement("span",{className:"param-type"},": () => Promise<void>"),n.createElement("p",null,"다운로드를 재개하는 함수")),n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"stop"),n.createElement("span",{className:"param-type"},": () => void"),n.createElement("p",null,"다운로드를 중지하는 함수")),n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"objectURL"),n.createElement("span",{className:"param-type"},": string | null"),n.createElement("p",null,"완료된 파일의 Object URL (완료 전에는 null)")),n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"error"),n.createElement("span",{className:"param-type"},": any"),n.createElement("p",null,"에러가 발생한 경우 에러 객체"))),n.createElement(l.A,{code:"import { usePrefetcher } from '@jobkaehenry/whisper-fetch/react';\n\nfunction MyComponent() {\n  const {\n    status,\n    progress,\n    start,\n    pause,\n    resume,\n    stop,\n    objectURL,\n    error\n  } = usePrefetcher({\n    url: 'https://cdn.example.com/file.bin'\n  });\n\n  return (\n    <div>\n      <p>상태: {status}</p>\n      <p>진행률: {progress}%</p>\n      {error && <p>에러: {error.message}</p>}\n      {objectURL && <a href={objectURL}>다운로드</a>}\n    </div>\n  );\n}",language:"tsx",title:"MyComponent.tsx"}))),n.createElement("div",{className:"section"},n.createElement("h2",{id:"prefetch-manager"},"PrefetchManager"),n.createElement("p",null,"여러 URL을 동시에 관리하고 병렬 다운로드를 제어하는 클래스입니다."),n.createElement("h3",{id:"manager-constructor"},"생성자"),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"new-prefetch-manager"},"new PrefetchManagerImpl(maxConcurrent?: number)"),n.createElement("p",null,"동시 다운로드 제한과 함께 새로운 PrefetchManager 인스턴스를 생성합니다."),n.createElement("div",{className:"param-list"},n.createElement("div",{className:"param"},n.createElement("span",{className:"param-name"},"maxConcurrent"),n.createElement("span",{className:"param-type"},"?: number"),n.createElement("p",null,"동시에 다운로드할 수 있는 최대 URL 개수 (기본값: 2)"))),n.createElement(l.A,{code:"import { PrefetchManagerImpl } from '@jobkaehenry/whisper-fetch';\n\nconst manager = new PrefetchManagerImpl(5);  // 동시에 최대 5개",language:"typescript"})),n.createElement("h3",{id:"manager-methods"},"메서드"),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"add"},"add(opts: ManagedPrefetchOptions): string"),n.createElement("p",null,"단일 URL을 큐에 추가하고 고유 ID를 반환합니다."),n.createElement(l.A,{code:"const id = manager.add({\n  url: 'https://cdn.example.com/video.mp4',\n  priority: 10,\n  onProgress: (done, total) => console.log(`${done}/${total}`)\n});",language:"typescript"})),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"add-batch"},"addBatch(urls: (string | ManagedPrefetchOptions)[]): string[]"),n.createElement("p",null,"여러 URL을 한 번에 큐에 추가하고 ID 배열을 반환합니다."),n.createElement(l.A,{code:"const ids = manager.addBatch([\n  'https://cdn.example.com/video1.mp4',\n  'https://cdn.example.com/video2.mp4',\n  { url: 'https://cdn.example.com/video3.mp4', priority: 5 }\n]);",language:"typescript"})),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"set-max-concurrent"},"setMaxConcurrent(n: number): void"),n.createElement("p",null,"동시 다운로드 제한을 변경합니다."),n.createElement(l.A,{code:"// 네트워크 상태에 따라 동적 조정\nif (navigator.connection?.effectiveType === '4g') {\n  manager.setMaxConcurrent(10);\n} else {\n  manager.setMaxConcurrent(2);\n}",language:"typescript"})),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"pause-manager"},"pause(id?: string): void"),n.createElement("p",null,"특정 다운로드 또는 모든 다운로드를 일시정지합니다."),n.createElement(l.A,{code:"manager.pause(id);  // 특정 다운로드만\nmanager.pause();    // 모든 다운로드",language:"typescript"})),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"resume-manager"},"resume(id?: string): void"),n.createElement("p",null,"특정 다운로드 또는 모든 다운로드를 재개합니다."),n.createElement(l.A,{code:"manager.resume(id);  // 특정 다운로드만\nmanager.resume();    // 모든 다운로드",language:"typescript"})),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"stop-manager"},"stop(id?: string): void"),n.createElement("p",null,"특정 다운로드 또는 모든 다운로드를 중지합니다."),n.createElement(l.A,{code:"manager.stop(id);  // 특정 다운로드만\nmanager.stop();    // 모든 다운로드",language:"typescript"})),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"remove"},"remove(id: string): boolean"),n.createElement("p",null,"다운로드를 큐에서 제거합니다."),n.createElement(l.A,{code:"const removed = manager.remove(id);",language:"typescript"})),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"get-status"},"getStatus(id: string)"),n.createElement("p",null,"다운로드의 현재 상태와 진행률을 반환합니다."),n.createElement(l.A,{code:"const status = manager.getStatus(id);\n// { status: 'active' | 'queued', progress: { done: number, total?: number } } | null",language:"typescript"})),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"purge"},"purge(id: string): Promise<void>"),n.createElement("p",null,"다운로드된 데이터를 정리하고 큐에서 제거합니다."),n.createElement(l.A,{code:"await manager.purge(id);",language:"typescript"}))),n.createElement("div",{className:"section"},n.createElement("h2",{id:"types"},"타입 정의"),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"status-type"},"Status"),n.createElement("p",null,"다운로드 상태를 나타내는 타입입니다."),n.createElement(l.A,{code:"type Status =\n  | 'idle'      // 시작 전\n  | 'started'   // 다운로드 진행 중\n  | 'paused'    // 일시정지됨\n  | 'resumed'   // 재개됨\n  | 'completed' // 완료됨\n  | 'stopped'   // 중지됨\n  | 'error';    // 에러 발생",language:"typescript",title:"types.ts"})),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"prefetch-options-type"},"PrefetchOptions"),n.createElement("p",null,"BackgroundPrefetcher 옵션 타입입니다."),n.createElement(l.A,{code:"interface PrefetchOptions {\n  url: string;\n  allowOnCellular?: boolean;\n  respectSaveData?: boolean;\n  minDownlinkMbps?: number;\n  chunkSize?: number;\n  integritySha256?: string;\n  store?: 'opfs' | 'idb';\n  onProgress?: (downloaded: number, total?: number) => void;\n  onStatus?: (status: Status, error?: any) => void;\n}",language:"typescript",title:"types.ts"})),n.createElement("div",{className:"api-method"},n.createElement("h4",{id:"managed-options-type"},"ManagedPrefetchOptions"),n.createElement("p",null,"PrefetchManager에서 사용하는 옵션 타입입니다."),n.createElement(l.A,{code:"interface ManagedPrefetchOptions extends PrefetchOptions {\n  priority?: number;  // 우선순위 (기본값: 0, 높을수록 먼저 처리)\n  id?: string;        // 고유 ID (미지정 시 자동 생성)\n}",language:"typescript",title:"types.ts"}))),n.createElement("div",{className:"section"},n.createElement("h2",{id:"network-api"},"네트워크 감지 API"),n.createElement("p",null,"Whisper Fetch는 브라우저의 Network Information API를 사용하여 네트워크 상태를 감지합니다."),n.createElement("h3",{id:"network-properties"},"지원되는 네트워크 속성"),n.createElement("ul",null,n.createElement("li",null,n.createElement("strong",null,"effectiveType"),": '4g', '3g', '2g', 'slow-2g'"),n.createElement("li",null,n.createElement("strong",null,"downlink"),": 예상 다운로드 속도 (Mbps)"),n.createElement("li",null,n.createElement("strong",null,"saveData"),": 사용자의 데이터 절약 모드 활성화 여부"),n.createElement("li",null,n.createElement("strong",null,"type"),": 'cellular', 'wifi', 'ethernet', 'none', 'unknown'")),n.createElement("p",null,"이러한 속성들을 기반으로 자동으로 다운로드 시점과 청크 크기를 조정합니다.")),n.createElement("div",{className:"section"},n.createElement("h2",{id:"storage-api"},"저장소 API"),n.createElement("h3",{id:"opfs"},"OPFS (Origin Private File System)"),n.createElement("p",null,"Chrome 114 이상에서 지원되는 고성능 파일 저장소입니다."),n.createElement("ul",null,n.createElement("li",null,"스트리밍 쓰기 지원"),n.createElement("li",null,"메모리 효율적"),n.createElement("li",null,"대용량 파일에 최적화")),n.createElement("h3",{id:"indexeddb"},"IndexedDB"),n.createElement("p",null,"모든 최신 브라우저에서 지원되는 폴백 저장소입니다."),n.createElement("ul",null,n.createElement("li",null,"광범위한 브라우저 호환성"),n.createElement("li",null,"청크 단위로 저장 후 조립"),n.createElement("li",null,"OPFS를 사용할 수 없을 때 자동 사용")),n.createElement(l.A,{code:"// 저장소 명시적 선택\nconst prefetcher = new BackgroundPrefetcher({\n  url: 'https://...',\n  store: 'idb'  // IndexedDB 강제 사용\n});",language:"typescript",title:"storage.ts"})),n.createElement("div",{className:"section"},n.createElement("h2",{id:"error-handling"},"에러 처리"),n.createElement("p",null,"Whisper Fetch는 다양한 에러 상황을 처리합니다:"),n.createElement("h3",{id:"network-errors"},"네트워크 에러"),n.createElement(l.A,{code:"const prefetcher = new BackgroundPrefetcher({\n  url: 'https://...',\n  onStatus: (status, error) => {\n    if (status === 'error') {\n      if (error.message.includes('Network')) {\n        console.error('네트워크 오류:', error);\n        // 재시도 로직\n      }\n    }\n  }\n});",language:"typescript",title:"error-handling.ts"}),n.createElement("h3",{id:"integrity-errors"},"무결성 검증 실패"),n.createElement(l.A,{code:"const prefetcher = new BackgroundPrefetcher({\n  url: 'https://...',\n  integritySha256: 'expected-hash',\n  onStatus: (status, error) => {\n    if (status === 'error' && error.message.includes('integrity')) {\n      console.error('파일 무결성 검증 실패');\n      // 재다운로드 또는 사용자에게 알림\n    }\n  }\n});",language:"typescript",title:"integrity-error.ts"}),n.createElement("h3",{id:"storage-errors"},"저장소 에러"),n.createElement(l.A,{code:"const prefetcher = new BackgroundPrefetcher({\n  url: 'https://...',\n  onStatus: (status, error) => {\n    if (status === 'error' && error.message.includes('storage')) {\n      console.error('저장소 오류 (용량 부족 가능성)');\n      // 저장소 공간 확인 또는 정리\n    }\n  }\n});",language:"typescript",title:"storage-error.ts"})),n.createElement("div",{className:"section"},n.createElement("h2",{id:"performance"},"성능 최적화 팁"),n.createElement("h3",{id:"chunk-size"},"1. 적절한 청크 크기 선택"),n.createElement("p",null,"대부분의 경우 자동 조정이 최적이지만, 특정 상황에서는 수동 설정이 유용할 수 있습니다:"),n.createElement("ul",null,n.createElement("li",null,"느린 네트워크: 512KB - 1MB"),n.createElement("li",null,"빠른 네트워크: 2MB - 4MB")),n.createElement("h3",{id:"storage-choice"},"2. 저장소 선택"),n.createElement("p",null,"Chrome 사용자가 많다면 OPFS를 사용하여 최고의 성능을 얻을 수 있습니다."),n.createElement("h3",{id:"network-conditions"},"3. 네트워크 조건 설정"),n.createElement("p",null,"모바일 사용자를 위해 allowOnCellular와 minDownlinkMbps를 적절히 설정하세요."),n.createElement("h3",{id:"memory"},"4. 메모리 관리"),n.createElement(l.A,{code:"// 사용 완료 후 Object URL 정리\nconst url = await prefetcher.getObjectURL();\nif (url) {\n  // 사용\n  downloadFile(url);\n\n  // 정리\n  URL.revokeObjectURL(url);\n  prefetcher.stop();\n}",language:"typescript",title:"memory.ts"})));const c=()=>n.createElement("title",null,"API 레퍼런스 - Whisper Fetch")}}]);
//# sourceMappingURL=component---docs-pages-api-tsx-22f34239322fd8838555.js.map